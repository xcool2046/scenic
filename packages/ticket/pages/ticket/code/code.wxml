<!-- packages/ticket/pages/ticket/code/code.wxml -->
<view class="container">
  <view class="ticket-card">
    <view class="header">
      <view class="title">电子票</view>
      <view class="ticket-name">{{ticketInfo.name}}</view>
    </view>
    
    <view class="code-container">
      <view class="code-wrapper">
        <image wx:if="{{ticketCode}}" class="qr-code" src="https://api.qrserver.com/v1/create-qr-code/?size=200x200&data={{ticketCode}}"></image>
        <view wx:else class="loading">加载中...</view>
      </view>
      <view class="code-text">{{ticketCode}}</view>
    </view>
    
    <view class="ticket-info">
      <view class="info-item">
        <view class="label">有效期</view>
        <view class="value {{isExpired ? 'expired' : ''}}">{{validTime}}</view>
      </view>
      <view class="info-item">
        <view class="label">票价</view>
        <view class="value">￥{{ticketInfo.price}}</view>
      </view>
      <view class="info-item">
        <view class="label">状态</view>
        <view class="value status-{{ticketInfo.status}}">
          {{ticketInfo.status === 'valid' ? '未使用' : (ticketInfo.status === 'used' ? '已使用' : '已过期')}}
        </view>
      </view>
    </view>
    
    <view class="tips">
      <view class="tip-title">使用说明</view>
      <view class="tip-content">1. 入园时请向工作人员出示此码</view>
      <view class="tip-content">2. 每个二维码仅限使用一次</view>
      <view class="tip-content">3. 请勿将二维码分享给他人</view>
    </view>
  </view>
  
  <view class="bottom-button" bindtap="goBack">返回</view>
</view> 