<!--è´­ç‰©è½¦ - Appleé£æ ¼æç®€ç‰ˆ-->
<view class="cart-container">
  
  <!-- é¡¶éƒ¨æ ‡é¢˜æ  - ç®€åŒ–ç‰ˆ -->
  <view class="header-section">
    <view class="page-title">è´­ç‰©è½¦</view>
    <view class="item-count" wx:if="{{cartItems.length > 0}}">{{totalQuantity}} ä»¶å•†å“</view>
  </view>

  <!-- è´­ç‰©è½¦å•†å“åˆ—è¡¨ - æç®€å¡ç‰‡å¼ -->
  <scroll-view class="cart-list" scroll-y="true" enhanced="true" wx:if="{{cartItems.length > 0}}">
    <view class="cart-item" wx:for="{{cartItems}}" wx:key="id"
          style="animation-delay: {{index * 80}}ms">
      
      <!-- å•†å“å›¾ç‰‡ -->
      <view class="item-image-container">
        <image class="item-image" 
               src="{{item.image}}" 
               mode="aspectFill"
               binderror="onImageError"
               bindload="onImageLoad"
               data-id="{{item.id}}">
        </image>
        <!-- å›¾ç‰‡åŠ è½½å¤±è´¥æ—¶çš„å ä½å›¾ -->
        <view class="image-placeholder" wx:if="{{item.imageError}}">
          <text class="placeholder-icon">ğŸ“¦</text>
        </view>
      </view>
      
      <!-- å•†å“ä¿¡æ¯ -->
      <view class="item-info">
        <view class="item-name">{{item.name}}</view>
        <view class="item-price">
          <text class="currency">Â¥</text>{{item.price}}
        </view>
      </view>
      
      <!-- æ•°é‡æ§åˆ¶ - åœ†å½¢æŒ‰é’® -->
      <view class="quantity-section">
        <view class="quantity-btn minus {{item.quantity <= 1 ? 'disabled' : ''}}" 
              bindtap="decreaseQuantity" 
              data-id="{{item.id}}">
          <text class="btn-icon">âˆ’</text>
        </view>
        <text class="quantity-num">{{item.quantity}}</text>
        <view class="quantity-btn plus" 
              bindtap="increaseQuantity" 
              data-id="{{item.id}}">
          <text class="btn-icon">+</text>
        </view>
      </view>
      
      <!-- åˆ é™¤æŒ‰é’® - éšè—å¼ -->
      <view class="delete-zone" bindtap="removeItem" data-id="{{item.id}}">
        <text class="delete-icon">Ã—</text>
      </view>
    </view>
  </scroll-view>

  <!-- ç©ºè´­ç‰©è½¦çŠ¶æ€ - æç®€ç‰ˆ -->
  <view class="empty-state" wx:if="{{cartItems.length === 0 && !loading}}">
    <view class="empty-icon">ğŸ›’</view>
    <view class="empty-title">è´­ç‰©è½¦æ˜¯ç©ºçš„</view>
    <view class="empty-action" bindtap="continueShopping">
      ç»§ç»­è´­ç‰©
    </view>
  </view>

  <!-- åº•éƒ¨ç»“ç®—æ  - æ‚¬æµ®å¡ç‰‡ -->
  <view class="checkout-panel" wx:if="{{cartItems.length > 0}}">
    <view class="total-info">
      <view class="total-label">åˆè®¡</view>
      <view class="total-price">
        <text class="currency">Â¥</text>{{totalAmount}}
      </view>
    </view>
    <view class="checkout-btn {{checking ? 'loading' : ''}}" bindtap="checkout">
      <text class="btn-text">{{checking ? 'å¤„ç†ä¸­' : 'ç«‹å³è´­ä¹°'}}</text>
    </view>
  </view>

  <!-- åŠ è½½çŠ¶æ€ - æœ€å°åŒ– -->
  <view class="loading-mask" wx:if="{{loading}}">
    <view class="loading-spinner"></view>
  </view>

</view> 