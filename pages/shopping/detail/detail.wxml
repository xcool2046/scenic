<!--å•†å“è¯¦æƒ…é¡µ-->
<view class="detail-container">
  
  <!-- å•†å“å›¾ç‰‡è½®æ’­ -->
  <view class="image-section">
    <swiper class="product-swiper" 
            indicator-dots="true" 
            indicator-color="rgba(255,255,255,0.5)"
            indicator-active-color="#ffffff"
            bindchange="onImageChange">
      <swiper-item wx:for="{{productImages}}" wx:key="*this">
        <image class="product-image" 
               src="{{item}}" 
               mode="aspectFill"
               data-index="{{index}}"
               bindtap="previewImage">
        </image>
      </swiper-item>
    </swiper>
    
    <!-- å›¾ç‰‡æŒ‡ç¤ºå™¨ -->
    <view class="image-indicator" wx:if="{{productImages.length > 1}}">
      <text class="indicator-text">{{currentImageIndex + 1}} / {{productImages.length}}</text>
    </view>
  </view>

  <!-- å•†å“ä¿¡æ¯ -->
  <view class="info-section">
    <view class="product-header">
      <view class="product-badge" wx:if="{{product.badge}}">{{product.badge}}</view>
      <view class="product-name">{{product.name}}</view>
      <view class="product-description">{{product.description}}</view>
    </view>
    
    <view class="price-section">
      <view class="price-main">
        <text class="price-symbol">Â¥</text>
        <text class="price-value">{{product.price}}</text>
      </view>
      <view class="price-original" wx:if="{{product.originalPrice}}">
        <text class="original-text">åŸä»·</text>
        <text class="original-value">Â¥{{product.originalPrice}}</text>
      </view>
    </view>
    
    <view class="sales-info">
      <view class="sales-item">
        <text class="sales-label">å·²å”®</text>
        <text class="sales-value">{{product.sales}}</text>
      </view>
      <view class="sales-item">
        <text class="sales-label">åº“å­˜</text>
        <text class="sales-value">{{product.stock}}</text>
      </view>
    </view>
  </view>

  <!-- å•†å“è¯¦æƒ… -->
  <view class="details-section">
    <view class="section-title">
      <view class="title-main">å•†å“è¯¦æƒ…</view>
      <view class="title-sub">PRODUCT DETAILS</view>
    </view>
    
    <view class="details-list">
      <view class="detail-item" wx:for="{{product.details}}" wx:key="*this">
        <text class="detail-text">{{item}}</text>
      </view>
    </view>
  </view>

  <!-- æ•°é‡é€‰æ‹© -->
  <view class="quantity-section">
    <view class="section-title">
      <view class="title-main">è´­ä¹°æ•°é‡</view>
      <view class="title-sub">QUANTITY</view>
    </view>
    
    <view class="quantity-selector">
      <view class="quantity-btn decrease {{quantity <= 1 ? 'disabled' : ''}}" 
            bindtap="decreaseQuantity">
        <text class="btn-text">âˆ’</text>
      </view>
      <input class="quantity-input" 
             type="number" 
             value="{{quantity}}"
             bindinput="onQuantityInput"
             disabled="{{loading}}">
      </input>
      <view class="quantity-btn increase {{quantity >= product.stock ? 'disabled' : ''}}" 
            bindtap="increaseQuantity">
        <text class="btn-text">+</text>
      </view>
    </view>
  </view>

  <!-- åº•éƒ¨æ“ä½œæ  -->
  <view class="bottom-actions">
    <view class="action-left">
      <view class="cart-btn" bindtap="goToCart">
        <text class="cart-icon">ğŸ›’</text>
        <view class="cart-badge" wx:if="{{cartCount > 0}}">{{cartCount}}</view>
      </view>
    </view>
    
    <view class="action-right">
      <view class="add-cart-btn {{addingToCart ? 'loading' : ''}}" 
            bindtap="addToCart">
        <text class="btn-text">{{addingToCart ? 'æ·»åŠ ä¸­...' : 'åŠ å…¥è´­ç‰©è½¦'}}</text>
      </view>
      
      <view class="buy-now-btn {{buying ? 'loading' : ''}}" 
            bindtap="buyNow">
        <text class="btn-text">{{buying ? 'å¤„ç†ä¸­...' : 'ç«‹å³è´­ä¹°'}}</text>
      </view>
    </view>
  </view>

  <!-- åŠ è½½çŠ¶æ€ -->
  <view class="loading-overlay" wx:if="{{loading}}">
    <view class="loading-content">
      <view class="loading-spinner"></view>
      <text class="loading-text">åŠ è½½ä¸­...</text>
    </view>
  </view>

</view> 