<!--ç ä¸Šå¯¼æ¸¸é¡µé¢ - Apple Musicæç®€é£æ ¼æ’­æ”¾å™¨-->
<view class="audio-guide-container">
  
  <!-- é¡¶éƒ¨æ ‡é¢˜åŒº -->
  <view class="header">
    <view class="title">éŸ³é¢‘å¯¼è§ˆ</view>
    <view class="subtitle">è†å¬æ™¯åŒºæ•…äº‹ï¼Œæ„Ÿå—æ–‡åŒ–é­…åŠ›</view>
  </view>
  
  <!-- ä¸»æ’­æ”¾å™¨ - Apple Musicæç®€é£æ ¼ -->
  <view class="main-player" wx:if="{{currentAudio}}">
    
    <!-- èƒŒæ™¯è‰ºæœ¯å›¾ -->
    <view class="artwork-section">
      <view class="artwork-container">
        <image class="artwork-image" src="{{currentAudio.image}}" mode="aspectFill"></image>
        <view class="artwork-reflection"></view>
      </view>
    </view>
    
    <!-- éŸ³è½¨ä¿¡æ¯ -->
    <view class="track-info">
      <view class="track-title">{{currentAudio.title}}</view>
      <view class="track-artist">æ™¯æ‚¦è¾¾å¯¼æ¸¸</view>
      <view class="track-description">{{currentAudio.description}}</view>
      <view class="track-category">{{currentAudio.category}}</view>
    </view>
    
    <!-- è¿›åº¦æ§åˆ¶ -->
    <view class="progress-section">
      <view class="time-display">
        <text class="current-time">{{currentTimeText}}</text>
        <text class="total-time">{{durationText}}</text>
      </view>
      <slider 
        class="progress-slider" 
        value="{{progress}}" 
        max="100" 
        min="0"
        bindchange="onProgressChange"
        activeColor="#007AFF"
        backgroundColor="#E5E5EA"
        block-color="#FFFFFF"
        block-size="20"/>
    </view>
    
    <!-- æ’­æ”¾æ§åˆ¶æŒ‰é’® - ç®€åŒ–ä¸ºä¸‰ä¸ªæ ¸å¿ƒæŒ‰é’® -->
    <view class="control-buttons">
      <view class="control-btn secondary" bindtap="playPrevious">
        <text class="iconfont">â®</text>
      </view>
      
      <view class="control-btn primary" bindtap="togglePlay">
        <text class="iconfont" wx:if="{{isPlaying}}">â¸</text>
        <text class="iconfont" wx:else>â–¶</text>
      </view>
      
      <view class="control-btn secondary" bindtap="playNext">
        <text class="iconfont">â­</text>
      </view>
    </view>
  </view>
  
  <!-- ç©ºçŠ¶æ€ -->
  <view class="empty-state" wx:if="{{!currentAudio && !loading && !error}}">
    <view class="empty-icon">ğŸµ</view>
    <view class="empty-title">é€‰æ‹©éŸ³é¢‘å¼€å§‹å¯¼è§ˆ</view>
    <view class="empty-description">ä»ä¸‹æ–¹åˆ—è¡¨ä¸­é€‰æ‹©æ‚¨æ„Ÿå…´è¶£çš„æ™¯ç‚¹</view>
  </view>
  
  <!-- æ™¯ç‚¹éŸ³é¢‘åˆ—è¡¨ -->
  <view class="spot-list-section">
    <view class="section-header">
      <view class="section-title">æ™¯ç‚¹å¯¼è§ˆ</view>
      <view class="section-subtitle">{{spotList.length}} ä¸ªéŸ³é¢‘</view>
    </view>
    
    <!-- åŠ è½½çŠ¶æ€ -->
    <view class="loading-state" wx:if="{{loading}}">
      <view class="loading-spinner"></view>
      <view class="loading-text">æ­£åœ¨åŠ è½½éŸ³é¢‘èµ„æº...</view>
    </view>
    
    <!-- é”™è¯¯çŠ¶æ€ -->
    <view class="error-state" wx:if="{{error}}">
      <view class="error-icon">âš ï¸</view>
      <view class="error-title">åŠ è½½å¤±è´¥</view>
      <view class="error-description">è¯·æ£€æŸ¥ç½‘ç»œè¿æ¥åé‡è¯•</view>
      <view class="error-retry" bindtap="refreshAudioList">é‡æ–°åŠ è½½</view>
    </view>
    
    <!-- éŸ³é¢‘åˆ—è¡¨ - ç®€åŒ–å¡ç‰‡è®¾è®¡ -->
    <view class="spot-list" wx:if="{{!loading && !error}}">
      <view 
        class="spot-item {{currentAudio && currentAudio.id === item.id ? 'active' : ''}}" 
        wx:for="{{spotList}}" 
        wx:key="id"
        data-index="{{index}}"
        bindtap="playAudio">
        
        <view class="spot-image-container">
          <image class="spot-image" src="{{item.image}}" mode="aspectFill"></image>
          <view class="spot-overlay" wx:if="{{currentAudio && currentAudio.id === item.id && isPlaying}}">
            <text class="play-indicator">â™ª</text>
          </view>
        </view>
        
        <view class="spot-content">
          <view class="spot-header">
            <view class="spot-title">{{item.title}}</view>
            <view class="spot-duration">{{item.durationText || (item.duration + 'ç§’')}}</view>
          </view>
          
          <view class="spot-description">{{item.description}}</view>
          
          <view class="spot-footer">
            <view class="spot-category">{{item.category}}</view>
            <view class="spot-status" wx:if="{{currentAudio && currentAudio.id === item.id}}">
              <text wx:if="{{isPlaying}}">æ­£åœ¨æ’­æ”¾</text>
              <text wx:else>å·²æš‚åœ</text>
            </view>
          </view>
        </view>
        
        <view class="spot-action">
          <view class="action-btn {{currentAudio && currentAudio.id === item.id && isPlaying ? 'playing' : ''}}">
            <text class="action-icon" wx:if="{{currentAudio && currentAudio.id === item.id && isPlaying}}">â¸</text>
            <text class="action-icon" wx:else>â–¶</text>
          </view>
        </view>
      </view>
    </view>
  </view>
  
</view> 