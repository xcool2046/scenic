<!--ç ä¸Šå¯¼æ¸¸é¡µé¢ - æç®€Appleé£æ ¼æ’­æ”¾å™¨-->
<view class="audio-guide-container">
  
  <!-- ä¸»æ’­æ”¾å™¨ - Apple Musicé£æ ¼ -->
  <view class="main-player" wx:if="{{currentAudio}}">
    
    <!-- èƒŒæ™¯è‰ºæœ¯å›¾ -->
    <view class="artwork-section">
      <view class="artwork-container">
        <image class="artwork-image" src="{{currentAudio.image}}" mode="aspectFill"></image>
        <view class="artwork-shadow"></view>
      </view>
    </view>
    
    <!-- éŸ³è½¨ä¿¡æ¯ -->
    <view class="track-info">
      <view class="track-title">{{currentAudio.title}}</view>
      <view class="track-artist">æ™¯æ‚¦è¾¾å¯¼æ¸¸</view>
      <view class="track-description">{{currentAudio.description}}</view>
    </view>
    
    <!-- è¿›åº¦æ§åˆ¶ -->
    <view class="progress-section">
      <view class="time-display">
        <text class="current-time">{{formatTime(currentTime)}}</text>
        <text class="total-time">{{formatTime(duration)}}</text>
      </view>
      <slider class="progress-slider" 
              value="{{progress}}" 
              min="0" 
              max="100"
              block-size="16"
              backgroundColor="rgba(255,255,255,0.2)"
              activeColor="#ffffff"
              bindchange="onProgressChange">
      </slider>
    </view>
    
    <!-- æ’­æ”¾æ§åˆ¶ -->
    <view class="controls">
      <view class="control-btn secondary" bindtap="playPrevious">
        <text class="control-icon">â®</text>
      </view>
      <view class="control-btn primary" bindtap="togglePlay">
        <text class="control-icon">{{isPlaying ? 'â¸' : 'â–¶'}}</text>
      </view>
      <view class="control-btn secondary" bindtap="playNext">
        <text class="control-icon">â­</text>
      </view>
    </view>
  </view>

  <!-- æ™¯ç‚¹åˆ—è¡¨ - æç®€å¡ç‰‡è®¾è®¡ -->
  <view class="spots-section">
    <view class="section-header">
      <view class="section-title">å¯¼è§ˆæ™¯ç‚¹</view>
      <view class="section-subtitle">{{spotList.length}} ä¸ªéŸ³é¢‘å¯¼è§ˆ</view>
    </view>

    <view class="spots-list">
      <view class="spot-item {{currentSpotIndex === index ? 'playing' : ''}}" 
            wx:for="{{spotList}}" 
            wx:key="id"
            wx:for-index="index"
            data-index="{{index}}"
            bindtap="onSpotTap">
        
        <view class="spot-thumbnail">
          <image class="spot-image" src="{{item.image}}" mode="aspectFill"></image>
          <view class="play-indicator" wx:if="{{currentSpotIndex === index && isPlaying}}">
            <view class="sound-wave">
              <view class="wave-bar"></view>
              <view class="wave-bar"></view>
              <view class="wave-bar"></view>
            </view>
          </view>
        </view>
        
        <view class="spot-content">
          <view class="spot-name">{{item.name}}</view>
          <view class="spot-duration">{{formatDuration(item.audioDuration)}}</view>
        </view>
        
        <view class="spot-action">
          <text class="action-icon">{{currentSpotIndex === index ? (isPlaying ? 'â¸' : 'â–¶') : 'â–¶'}}</text>
        </view>
      </view>
    </view>
  </view>

  <!-- ç©ºçŠ¶æ€ - æç®€è®¾è®¡ -->
  <view class="empty-state" wx:if="{{spotList.length === 0 && !loading}}">
    <view class="empty-artwork">
      <view class="empty-circle">
        <text class="empty-icon">ğŸ§</text>
      </view>
    </view>
    <view class="empty-text">æš‚æ— éŸ³é¢‘å¯¼è§ˆ</view>
    <view class="empty-subtitle">è¯·ç¨åå†è¯•</view>
  </view>

  <!-- åŠ è½½çŠ¶æ€ -->
  <loading wx:if="{{loading}}" />
  
  <!-- æ¶ˆæ¯æç¤º -->
  <toast />

</view> 